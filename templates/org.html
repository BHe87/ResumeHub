{% extends "base.html" %}
<!DOCTYPE html>
<html>
{% block title %} ResumeHub - Organization {% endblock %}

{% block script %}
function displayPopup() {
  let popup = document.getElementById("student-profile");
  popup.style.display = "block";
}

function closePopup(){
  let popup = document.getElementById("student-profile");
  popup.style.display = "none";
}

{% endblock %}

{% block head %}
<link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='styles/org.css') }}">
{{ super() }}
{% endblock %}

{% block container %}
  <div>
    <p id="org-header" class="black">{{ organization.name }}</p>
    <div class="stats-container">
      <img id="org-person" src="{{ url_for('static', filename='svg/person.svg')}}">
      <p class="stats">{{organization.students|length}}</p>
    </div>
    <p id="org-description" class="black">{{ organization.description }}</p>
  </div>
  <p id="org-header" class="black">Students</p>
  {% if organization.students|length > 0 %}
  <p></p>
  <div class="organizations">
      {% for student in organization.students %}
      <div class="flex-container organization-box" onclick="displayPopup()">
        <div class="info">
          <p class="name">{{ student.first_name + ' ' + student.last_name }}<p>
        </div>
        <div class="description">
          <p>{{ student.year.value + " in " + student.major }}</p>
        </div>
      </div>
      {% endfor %}
    {% else %}
      <p id="org-header" class="black">No Students D:</p>
    {% endif %}
  </div>
  <p id="org-header" class="black">Sponsors</p>
  <p></p>
  <div class="organizations">
  {% if organization.companies|length > 0 %}
    {% for company in organization.companies %}
      <div class="flex-container organization-box">
        <div class="info">
          <p class="name">{{ company.name }}<p>
        </div>
        <div class="description">
            <p>{{ company.description }}</p>
          </div>
      </div>
    {% endfor %}
  {% else %}
    <p id="org-header" class="black">No sponsors :(</p>
  {% endif %}
  </div>

{% if session['role'] == 'organization' %}
  <p id="org-header" class="black">Pending Students</p>
  <p></p>
  <div class="organizations">
  {% for student in g.user.pending_students %}
    <div class="flex-container organization-box">
      <div class="info">
        <p class="name">{{ student.first_name + ' ' + student.last_name }}<p>
      </div>
      <div class="description">
        <p>{{ student.year.value + " in " + student.major }}</p>
      </div>
      <form action="{{ url_for('approve_student_request', id=student.id ) }}" method="post"><button type="submit">Approve</button></form>
      <form action="{{ url_for('reject_student_request', id=student.id ) }}" method="post"><button type="submit">Reject</button></form>
    </div>
    {% endfor %}
  </div>
  <p id="org-header" class="black">Pending Sponsors</p>
  <p></p>
  <div class="organizations">
    {% for company in g.user.pending_companies %}
    <div class="flex-container organization-box">
      <div class="info">
        <p class="name">{{ company.name }}<p>
      </div>
      <div class="description">
        <p>{{ company.description }}</p>
      </div>
      <form action="{{ url_for('approve_company_request', id=company.id ) }}" method="post"><button type="submit">Approve</button></form>
      <form action="{{ url_for('reject_company_request', id=company.id ) }}" method="post"><button type="submit">Reject</button></form>
    </div>
    {% endfor %}
  </div>
{% endif %}
{% if session['role'] == 'organization' %}
<!-- Student profile popup -->
<div class="overlay" id="student-profile">
	<div class="popup">
		<h2 id=studnet-name>TODO: Student name</h2>
		<a class="close" onclick="closePopup()">&times;</a>
		<div class="content">
      <label for="first-name">First Name:</label>
      <span id="first-name">TODO</span>
      <label for="last-name">Last Name:</label>
      <span id="last-name">TODO</span>
      <br>
      <label for="major">Major:</label>
      <span id="major">TODO</span>
      <label for="minor">Minor:</label>
      <span id="minor">TODO</span>
      <label for="grade">Grade:</label>
      <span id="grade">TODO</span>
      <label for="gender">Gender:</label>
      <span id="gender">TODO</span>
      <label for="gpa">GPA:</label>
      <span id="gpa">TODO</span>
      <label for="phone-number">Phone Number:</label>
      <span id="phone-number">TODO</span>
		</div>
	</div>
</div>
{% endif %}

{% endblock %}
</html>